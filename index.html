<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>๐ฎ ูุนุจุฉ ูุงุฑูู ุงูุฎุงุฑูุฉ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- ุดุงุดุฉ ุงูุชุญููู -->
    <div id="loading-screen" class="screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h2>๐ฎ ุฌุงุฑู ุชุญููู ุงููุบุงูุฑุฉ...</h2>
            <div class="loading-progress">
                <div class="progress-bar"></div>
                <span id="progress-text">0%</span>
            </div>
            <p class="loading-tip" id="loading-tip">ุฌุงุฑู ุชููุฆุฉ ุนุงูู ุงููุนุจุฉ...</p>
        </div>
    </div>

    <!-- ุฒุฑ ููุก ุงูุดุงุดุฉ -->
    <button id="fullscreen-btn" title="ููุก ุงูุดุงุดุฉ">
        <i class="fas fa-expand"></i>
    </button>

    <!-- ุฒุฑ ุงูููุณููู -->
    <button id="music-btn" title="ุชุดุบูู/ุฅููุงู ุงูููุณููู">
        <i class="fas fa-volume-up"></i>
    </button>

    <!-- ุดุงุดุฉ ุงูุจุฏุงูุฉ -->
    <div id="start-screen" class="screen">
        <div class="screen-content">
            <!-- ุงูุนููุงู ุงูุฑุฆูุณู -->
            <div class="main-header">
                <div class="game-logo">
                    <i class="fas fa-gamepad"></i>
                    <h1>ูุนุจุฉ ูุงุฑูู <span class="highlight">ุงูุฎุงุฑูุฉ</span></h1>
                </div>
                <p class="game-tagline">ูุบุงูุฑุชู ุงูุดุฎุตูุฉ ุชุจุฏุฃ ุงูุขู!</p>
            </div>

            <!-- ุตูุฑุฉ ุงููุงุนุจ -->
            <div class="hero-section">
                <div class="character-display">
                    <div class="character-frame">
                        <img id="hero-image" src="player.png" alt="ุจุทู ุงููุนุจุฉ">
                        <div class="character-overlay">
                            <div class="character-name">๐ฐ ุงูุจุทู</div>
                            <div class="character-level">ุงููุณุชูู 1</div>
                        </div>
                        <div class="character-glow"></div>
                    </div>
                    <div class="character-stats">
                        <div class="stat">
                            <i class="fas fa-bolt"></i>
                            <span>ุงูุณุฑุนุฉ: <strong>ุนุงููุฉ</strong></span>
                        </div>
                        <div class="stat">
                            <i class="fas fa-shield-alt"></i>
                            <span>ุงูุฏูุงุน: <strong>ูุชูุณุท</strong></span>
                        </div>
                        <div class="stat">
                            <i class="fas fa-fist-raised"></i>
                            <span>ุงูููุฉ: <strong>ุนุงููุฉ</strong></span>
                        </div>
                    </div>
                </div>

                <!-- ุจุทุงูุฉ ุงูุฅุญุตุงุฆูุงุช -->
                <div class="stats-cards">
                    <div class="stat-card glowing">
                        <div class="stat-icon">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div class="stat-info">
                            <h4>๐ ุฃูุถู ูุชูุฌุฉ</h4>
                            <p id="high-score" class="stat-value">0</p>
                            <small>ุงูุณุฌู ุงูููุงุณู</small>
                        </div>
                    </div>
                    
                    <div class="stat-card glowing">
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-info">
                            <h4>โฑ๏ธ ุงูุชุญุฏู ุงูุฒููู</h4>
                            <p class="stat-value">02:00</p>
                            <small>ุฏูููุชุงู ููุท!</small>
                        </div>
                    </div>
                    
                    <div class="stat-card glowing">
                        <div class="stat-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="stat-info">
                            <h4>โค๏ธ ุงูุฃุฑูุงุญ</h4>
                            <p class="stat-value">3</p>
                            <small>ูุฑุต ููููุฒ</small>
                        </div>
                    </div>
                    
                    <div class="stat-card glowing">
                        <div class="stat-icon">
                            <i class="fas fa-coins"></i>
                        </div>
                        <div class="stat-info">
                            <h4>๐ฐ ุงูููุฒ ุงูููููุฏ</h4>
                            <p class="stat-value">30</p>
                            <small>ุนููุฉ ุฐูุจูุฉ</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ุฃุฒุฑุงุฑ ุงูุชุญูู ุงูุฑุฆูุณูุฉ -->
            <div class="action-buttons">
                <button id="start-btn" class="btn epic-btn">
                    <i class="fas fa-rocket"></i>
                    <span>๐ ุงุจุฏุฃ ุงููุบุงูุฑุฉ</span>
                </button>
                
                <button id="how-to-play" class="btn guide-btn">
                    <i class="fas fa-graduation-cap"></i>
                    <span>๐ ุฏููู ุงููุนุจ</span>
                </button>
                
                <button id="settings-btn" class="btn settings-btn">
                    <i class="fas fa-cogs"></i>
                    <span>โ๏ธ ุงูุฅุนุฏุงุฏุงุช</span>
                </button>
            </div>

            <!-- ููุญุฉ ุงูุชุญูู -->
            <div class="control-panel">
                <h3><i class="fas fa-gamepad"></i> ูุฑูุฒ ุงูุชุญูู</h3>
                
                <div class="controls-grid">
                    <div class="control-group">
                        <h4><i class="fas fa-keyboard"></i> ููุญุฉ ุงูููุงุชูุญ</h4>
                        <div class="keyboard-controls">
                            <div class="key-combo">
                                <kbd>โ</kbd> <kbd>A</kbd>
                                <span>ุงูุชุญุฑู ูููุณุงุฑ</span>
                            </div>
                            <div class="key-combo">
                                <kbd>โ</kbd> <kbd>D</kbd>
                                <span>ุงูุชุญุฑู ูููููู</span>
                            </div>
                            <div class="key-combo">
                                <kbd>Space</kbd> <kbd>W</kbd> <kbd>โ</kbd>
                                <span>ุงูููุฒ ุงูุนุงูู</span>
                            </div>
                            <div class="key-combo">
                                <kbd>P</kbd>
                                <span>ุฅููุงู/ูุชุงุจุนุฉ</span>
                            </div>
                            <div class="key-combo">
                                <kbd>F</kbd>
                                <span>ููุก ุงูุดุงุดุฉ</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <h4><i class="fas fa-mobile-alt"></i> ุงูุดุงุดุงุช ุงูุฐููุฉ</h4>
                        <div class="touch-controls">
                            <div class="touch-button">
                                <i class="fas fa-arrow-left"></i>
                                <span>ูุณุงุฑ</span>
                            </div>
                            <div class="touch-button">
                                <i class="fas fa-arrow-right"></i>
                                <span>ูููู</span>
                            </div>
                            <div class="touch-button jump-btn">
                                <i class="fas fa-arrow-up"></i>
                                <span>ููุฒ</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ูุนูููุงุช ุณุฑูุนุฉ -->
            <div class="quick-info">
                <div class="info-card">
                    <i class="fas fa-trophy"></i>
                    <div>
                        <h4>๐ฏ ุงููุฏู ุงูููุงุฆู</h4>
                        <p>ุงุฌูุน 30 ุนููุฉ ููุตู ูููุตุฑ ุงููููู!</p>
                    </div>
                </div>
                <div class="info-card">
                    <i class="fas fa-skull-crossbones"></i>
                    <div>
                        <h4>โ๏ธ ุงููุฎุงุทุฑ</h4>
                        <p>ุชุฌูุจ ุงูุฃุนุฏุงุก ูุงูุญูุฑ ุงูุนูููุฉ!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ุดุงุดุฉ ุงููุนุจ -->
    <div id="game-screen" class="screen">
        <!-- ุดุฑูุท ุงููุนูููุงุช ุงูุนููู -->
        <div class="game-header">
            <div class="header-left">
                <div class="player-status">
                    <div class="status-item">
                        <i class="fas fa-heart"></i>
                        <span id="lives">3</span>
                    </div>
                    <div class="status-item">
                        <i class="fas fa-star"></i>
                        <span id="score">0</span>
                    </div>
                    <div class="status-item">
                        <i class="fas fa-coins"></i>
                        <span id="coins">0/30</span>
                    </div>
                </div>
            </div>
            
            <div class="header-center">
                <div class="mission-timer">
                    <i class="fas fa-hourglass-half"></i>
                    <span id="timer">02:00</span>
                </div>
                <div class="mission-info" id="mission-info">
                    ๐ฏ ุงุฌูุน ุงูุนููุงุช ุงูุฐูุจูุฉ!
                </div>
            </div>
            
            <div class="header-right">
                <button id="pause-game" class="header-btn" title="ุฅููุงู ุงููุนุจุฉ">
                    <i class="fas fa-pause"></i>
                </button>
                <button id="game-menu" class="header-btn" title="ุงููุงุฆูุฉ">
                    <i class="fas fa-bars"></i>
                </button>
                <button id="sound-toggle" class="header-btn" title="ุงูุตูุช">
                    <i class="fas fa-volume-up"></i>
                </button>
            </div>
        </div>

        <!-- ููุทูุฉ ุงููุนุจุฉ -->
        <div class="game-world">
            <canvas id="game-canvas"></canvas>
            
            <!-- ุทุจูุงุช ุงูุชุฃุซูุฑุงุช -->
            <div class="effects-layer">
                <div class="particles-container"></div>
                <div class="notifications"></div>
            </div>
            
            <!-- ุจูุตูุฉ ุงูุชูุฌูู -->
            <div class="compass">
                <div class="compass-arrow" id="compass-arrow">โ</div>
                <div class="compass-distance" id="compass-distance">200m</div>
            </div>
        </div>

        <!-- ุฃุฒุฑุงุฑ ุงูุชุญูู ููุฌูุงู -->
        <div class="mobile-game-controls">
            <div class="movement-pad">
                <button id="mobile-left" class="mobile-control-btn move-btn">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="pad-center">
                    <button id="mobile-action" class="mobile-control-btn action-btn">
                        <i class="fas fa-bolt"></i>
                    </button>
                </div>
                <button id="mobile-right" class="mobile-control-btn move-btn">
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
            
            <div class="action-pad">
                <button id="mobile-jump" class="mobile-control-btn jump-btn">
                    <i class="fas fa-arrow-up"></i>
                    <span>ููุฒ</span>
                </button>
                <button id="mobile-special" class="mobile-control-btn special-btn">
                    <i class="fas fa-star"></i>
                    <span>ุฎุงุต</span>
                </button>
            </div>
        </div>

        <!-- ุดุฑูุท ุงูุชูุฏู -->
        <div class="progress-tracker">
            <div class="progress-bar-game">
                <div class="progress-fill" id="level-progress"></div>
            </div>
            <div class="progress-labels">
                <span>ุงูุจุฏุงูุฉ</span>
                <span id="current-progress">0%</span>
                <span>ุงููุฏู ุงูููุงุฆู</span>
            </div>
        </div>
    </div>

    <!-- ุดุงุดุฉ ุงูููุงูุฉ -->
    <div id="end-screen" class="screen">
        <div class="victory-screen">
            <div class="victory-content">
                <!-- ุดุงุฑุฉ ุงููุตุฑ -->
                <div class="victory-badge" id="victory-badge">
                    <i class="fas fa-trophy"></i>
                </div>
                
                <!-- ุงูุนููุงู ุงูููุงุฆู -->
                <h1 id="end-title" class="victory-title">๐ ุงูุชุตุงุฑ ูุฐูู!</h1>
                
                <!-- ุงูุฑุณุงูุฉ ุงูููุงุฆูุฉ -->
                <p id="end-message" class="victory-message">
                    ููุฏ ุฃูููุช ุงููุบุงูุฑุฉ ุจูุฌุงุญ ุจุงูุฑ!
                </p>
                
                <!-- ุงูุฅุญุตุงุฆูุงุช ุงูููุงุฆูุฉ -->
                <div class="victory-stats">
                    <div class="victory-stat epic">
                        <div class="stat-label">๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ</div>
                        <div class="stat-value" id="final-score">0</div>
                        <div class="stat-medal">
                            <i class="fas fa-medal"></i>
                        </div>
                    </div>
                    
                    <div class="victory-stat">
                        <div class="stat-label">๐ฐ ุงููููุฒ ุงููุฌูุนุฉ</div>
                        <div class="stat-value" id="final-coins">0/30</div>
                        <div class="stat-icon">
                            <i class="fas fa-coins"></i>
                        </div>
                    </div>
                    
                    <div class="victory-stat">
                        <div class="stat-label">โฑ๏ธ ุงูููุช ุงููุณุชุบุฑู</div>
                        <div class="stat-value" id="final-time">00:00</div>
                        <div class="stat-icon">
                            <i class="fas fa-stopwatch"></i>
                        </div>
                    </div>
                    
                    <div class="victory-stat">
                        <div class="stat-label">๐ ุงูุฃุนุฏุงุก ุงูููููุฑูู</div>
                        <div class="stat-value" id="final-kills">0</div>
                        <div class="stat-icon">
                            <i class="fas fa-skull"></i>
                        </div>
                    </div>
                </div>
                
                <!-- ุฌูุงุฆุฒ ุงูุฅูุฌุงุฒ -->
                <div class="achievements">
                    <h3><i class="fas fa-award"></i> ุฅูุฌุงุฒุงุชู</h3>
                    <div class="achievement-list">
                        <div class="achievement unlocked">
                            <i class="fas fa-check-circle"></i>
                            <span>ุฅููุงู ุงููุณุชูู ุงูุฃูู</span>
                        </div>
                        <div class="achievement" id="coin-master">
                            <i class="fas fa-coins"></i>
                            <span>ุณูุฏ ุงูุนููุงุช</span>
                        </div>
                        <div class="achievement" id="speed-runner">
                            <i class="fas fa-bolt"></i>
                            <span>ุนุฏุงุก ุณุฑูุน</span>
                        </div>
                    </div>
                </div>
                
                <!-- ุฃุฒุฑุงุฑ ุงูููุงูุฉ -->
                <div class="victory-actions">
                    <button id="play-again" class="btn epic-btn">
                        <i class="fas fa-redo"></i>
                        <span>๐ ูุบุงูุฑุฉ ุฌุฏูุฏุฉ</span>
                    </button>
                    
                    <button id="back-to-menu" class="btn menu-btn">
                        <i class="fas fa-home"></i>
                        <span>๐ ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</span>
                    </button>
                    
                    <button id="share-victory" class="btn share-btn">
                        <i class="fas fa-share-alt"></i>
                        <span>๐ข ุดุงุฑู ุฅูุฌุงุฒู</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ุงูุชุนูููุงุช -->
    <div id="help-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-graduation-cap"></i> ุฃูุงุฏูููุฉ ุงูุฃุจุทุงู</h2>
                <button class="close-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- ุฏููู ุงููุนุจ -->
                <div class="guide-section">
                    <h3><i class="fas fa-book"></i> ุฏููู ุงููุนุจ ุงูุดุงูู</h3>
                    <div class="guide-content">
                        <div class="guide-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>๐ฏ ุงููุฏู ุงูุฑุฆูุณู</h4>
                                <p>ุงุฌูุน <strong>30 ุนููุฉ ุฐูุจูุฉ</strong> ูู ุนุงูู ูููุก ุจุงูุชุญุฏูุงุชุ ููุตู ูููุตุฑ ุงููููู ูุจู ุงูุชูุงุก ุงูููุช!</p>
                            </div>
                        </div>
                        
                        <div class="guide-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>โ๏ธ ูุธุงู ุงููุชุงู</h4>
                                <p>ุงููุฒ ููู ุฑุคูุณ ุงูุฃุนุฏุงุก ููุฒููุชููุ ูุงุญุตู ุนูู <strong>200 ููุทุฉ</strong> ููู ุนุฏู ุชููุฑู!</p>
                            </div>
                        </div>
                        
                        <div class="guide-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>๐ฐ ูุธุงู ุงูุงูุชุตุงุฏ</h4>
                                <p>ูู ุนููุฉ ุฐูุจูุฉ = <strong>100 ููุทุฉ</strong>. ุงุฌูุนูุง ุฌููุนุงู ูุชุญุตู ุนูู ููุงูุฃุฉ ุถุฎูุฉ!</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ุฃุณุฑุงุฑ ูุฎุจุงูุง -->
                <div class="secrets-section">
                    <h3><i class="fas fa-key"></i> ุฃุณุฑุงุฑ ุงูุฎุจุฑุงุก</h3>
                    <div class="secrets-grid">
                        <div class="secret">
                            <i class="fas fa-lightbulb"></i>
                            <h4>ุงูููุฒ ุงููุฒุฏูุฌ</h4>
                            <p>ุงุถุบุท ุฒุฑ ุงูููุฒ ูุฑุชูู ุจุณุฑุนุฉ ููุญุตูู ุนูู ููุฒุฉ ุฃุนูู!</p>
                        </div>
                        <div class="secret">
                            <i class="fas fa-running"></i>
                            <h4>ุงูุนุฏู ุงูุณุฑูุน</h4>
                            <p>ุงุถุบุท ุฒุฑูู ุงุชุฌุงู ูู ููุณ ุงูููุช ูุฒูุงุฏุฉ ุงูุณุฑุนุฉ!</p>
                        </div>
                        <div class="secret">
                            <i class="fas fa-shield-alt"></i>
                            <h4>ุงูููุงุนุฉ ุงูุฐููุฉ</h4>
                            <p>ุจุนุฏ ุงูุชุนุฑุถ ูุถุฑุฑุ ูุฏูู 3 ุซูุงูู ููุงุนุฉ!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ุงูุฅุนุฏุงุฏุงุช -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-cogs"></i> ูุฑูุฒ ุงูุชุญูู</h2>
                <button class="close-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h3><i class="fas fa-sliders-h"></i> ุฅุนุฏุงุฏุงุช ุงููุนุจุฉ</h3>
                    
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="sound-effects" checked>
                            <span>๐ ูุคุซุฑุงุช ุตูุชูุฉ</span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="background-music" checked>
                            <span>๐ต ููุณููู ุงูุฎูููุฉ</span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="vibration" checked>
                            <span>๐ณ ุงูุชุฒุงุฒ ุงูุฃุฒุฑุงุฑ</span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="particles" checked>
                            <span>โจ ุชุฃุซูุฑุงุช ุงูุฌุณููุงุช</span>
                        </label>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3><i class="fas fa-gamepad"></i> ุฅุนุฏุงุฏุงุช ุงูุชุญูู</h3>
                    
                    <div class="setting-item">
                        <label>ุญุณุงุณูุฉ ุงูุญุฑูุฉ</label>
                        <input type="range" id="sensitivity" min="1" max="10" value="5">
                    </div>
                    
                    <div class="setting-item">
                        <label>ุญุฌู ุฃุฒุฑุงุฑ ุงูุฌูุงู</label>
                        <input type="range" id="button-size" min="60" max="120" value="80">
                    </div>
                </div>
                
                <button class="btn save-settings">
                    <i class="fas fa-save"></i> ุญูุธ ุงูุฅุนุฏุงุฏุงุช
                </button>
            </div>
        </div>
    </div>

    <!-- ูุธุงู ุงูุฅุดุนุงุฑุงุช -->
    <div id="notification-system">
        <div class="notification" style="display: none;">
            <i class="fas fa-info-circle"></i>
            <span class="notification-text"></span>
        </div>
    </div>

    <!-- ุฃุญุฒูุฉ ุงูุชูุฏู -->
    <div class="progress-ribbons">
        <div class="ribbon level-ribbon">
            <span>ุงููุณุชูู: <strong>1</strong></span>
        </div>
        <div class="ribbon score-ribbon">
            <span>ุงูููุงุท: <strong id="ribbon-score">0</strong></span>
        </div>
    </div>

    <!-- ูุธุงู ุงูุทูุงุฑุฆ -->
    <div class="emergency-panel">
        <button class="emergency-btn" onclick="forceStartGame()">
            <i class="fas fa-play-circle"></i>
            <span>ุจุฏุก ุทุงุฑุฆ</span>
        </button>
        <button class="emergency-btn" onclick="resetGame()">
            <i class="fas fa-redo-alt"></i>
            <span>ุฅุนุงุฏุฉ ุชุนููู</span>
        </button>
        <button class="emergency-btn" onclick="showDebugInfo()">
            <i class="fas fa-bug"></i>
            <span>ูุนูููุงุช ุงูุชุตุญูุญ</span>
        </button>
    </div>

    <!-- =========================================== -->
    <!-- ููุง ุงูููุฏ ุงููุนุฏู ุจุฏู ุงูู Script ุงูุทููู -->
    <!-- =========================================== -->
    
    <script>
        // ูุธุงู ุชุญููู ูุจุณุท ุฌุฏุงู
        document.addEventListener('DOMContentLoaded', function() {
            console.log('๐ ุจุฏุก ุชุดุบูู ุงููุนุจุฉ...');
            
            // 1. ุฅุฎูุงุก ุดุงุดุฉ ุงูุชุญููู ููุฑุงู
            const loadingScreen = document.getElementById('loading-screen');
            if (loadingScreen) {
                loadingScreen.style.display = 'none';
            }
            
            // 2. ุฅุธูุงุฑ ุดุงุดุฉ ุงูุจุฏุงูุฉ ูุจุงุดุฑุฉ
            const startScreen = document.getElementById('start-screen');
            if (startScreen) {
                startScreen.style.display = 'flex';
            }
            
            // 3. ุชุญููู ุฃูุถู ูุชูุฌุฉ
            try {
                const saved = localStorage.getItem('mario_high_score');
                const highScore = saved ? parseInt(saved) : 0;
                const highScoreElement = document.getElementById('high-score');
                if (highScoreElement) {
                    highScoreElement.textContent = highScore;
                }
            } catch (e) {
                console.log('โ๏ธ ูุดู ุชุญููู ุฃูุถู ูุชูุฌุฉ');
            }
            
            // 4. ุชููุฆุฉ ุงูุฃุฒุฑุงุฑ ุงูุฃุณุงุณูุฉ
            setupBasicControls();
            
            // 5. ุฅูุดุงุก ูุณุฎุฉ ุงููุนุจุฉ
            setTimeout(initGame, 500);
        });
        
        function setupBasicControls() {
            // ุฒุฑ ุงูุจุฏุก
            const startBtn = document.getElementById('start-btn');
            if (startBtn) {
                startBtn.addEventListener('click', function() {
                    if (window.game && window.game.startGame) {
                        window.game.startGame();
                    } else {
                        alert('๐ฎ ุฌุงุฑู ุชููุฆุฉ ุงููุนุจุฉ...');
                        setTimeout(function() {
                            if (window.game && window.game.startGame) {
                                window.game.startGame();
                            }
                        }, 1000);
                    }
                });
            }
            
            // ุฒุฑ ุงูุฅุนุฏุงุฏุงุช
            const settingsBtn = document.getElementById('settings-btn');
            if (settingsBtn) {
                settingsBtn.addEventListener('click', function() {
                    const modal = document.getElementById('settings-modal');
                    if (modal) modal.style.display = 'flex';
                });
            }
            
            // ุฒุฑ ุงูุชุนูููุงุช
            const helpBtn = document.getElementById('how-to-play');
            if (helpBtn) {
                helpBtn.addEventListener('click', function() {
                    const modal = document.getElementById('help-modal');
                    if (modal) modal.style.display = 'flex';
                });
            }
            
            // ุฒุฑ ููุก ุงูุดุงุดุฉ
            const fullscreenBtn = document.getElementById('fullscreen-btn');
            if (fullscreenBtn) {
                fullscreenBtn.addEventListener('click', toggleFullscreen);
            }
            
            // ุฒุฑ ุงูููุณููู
            const musicBtn = document.getElementById('music-btn');
            if (musicBtn) {
                musicBtn.addEventListener('click', toggleMusic);
            }
            
            // ุฃุฒุฑุงุฑ ุฅุบูุงู ุงูููุงูุฐ
            document.querySelectorAll('.close-modal').forEach(btn => {
                btn.addEventListener('click', function() {
                    const modal = this.closest('.modal');
                    if (modal) modal.style.display = 'none';
                });
            });
            
            // ุฒุฑ ุญูุธ ุงูุฅุนุฏุงุฏุงุช
            const saveSettingsBtn = document.querySelector('.save-settings');
            if (saveSettingsBtn) {
                saveSettingsBtn.addEventListener('click', function() {
                    alert('โ๏ธ ุชู ุญูุธ ุงูุฅุนุฏุงุฏุงุช');
                    const modal = document.getElementById('settings-modal');
                    if (modal) modal.style.display = 'none';
                });
            }
            
            // ุฒุฑ ุฅุนุงุฏุฉ ุงูุชุดุบูู
            const playAgainBtn = document.getElementById('play-again');
            if (playAgainBtn) {
                playAgainBtn.addEventListener('click', function() {
                    if (window.game && window.game.restartGame) {
                        window.game.restartGame();
                    }
                });
            }
            
            // ุฒุฑ ุงูุนูุฏุฉ ูููุงุฆูุฉ
            const backToMenuBtn = document.getElementById('back-to-menu');
            if (backToMenuBtn) {
                backToMenuBtn.addEventListener('click', function() {
                    if (window.game && window.game.backToMenu) {
                        window.game.backToMenu();
                    } else {
                        document.getElementById('game-screen').style.display = 'none';
                        document.getElementById('start-screen').style.display = 'flex';
                    }
                });
            }
            
            // ุฒุฑ ุงููุดุงุฑูุฉ
            const shareBtn = document.getElementById('share-victory');
            if (shareBtn) {
                shareBtn.addEventListener('click', function() {
                    alert('๐ข ุดุงุฑู ุฅูุฌุงุฒู ูุน ุฃุตุฏูุงุฆู!\n\nููููู ุงูุชูุงุท ุตูุฑุฉ ููุดุงุดุฉ ููุดุงุฑูุชูุง.');
                });
            }
        }
        
        function initGame() {
            console.log('๐ฎ ุฅูุดุงุก ูุณุฎุฉ ุงููุนุจุฉ...');
            try {
                // ุชุญููู ููู game.js
                const script = document.createElement('script');
                script.src = 'game.js';
                script.onload = function() {
                    console.log('โ game.js ูุญูู ุจูุฌุงุญ');
                    if (typeof MarioGame !== 'undefined') {
                        window.game = new MarioGame();
                        console.log('โ ุงููุนุจุฉ ุฌุงูุฒุฉ ููุนุจ!');
                        
                        // ุชุญุฏูุซ ุตูุฑุฉ ุงููุงุนุจ
                        const heroImage = document.getElementById('hero-image');
                        if (heroImage) {
                            heroImage.onerror = function() {
                                this.style.display = 'none';
                                const parent = this.parentElement;
                                if (parent) {
                                    parent.innerHTML += '<div style="width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;color:white;font-size:24px;"><i class="fas fa-user-ninja"></i><div>ุงูุจุทู</div></div>';
                                }
                            };
                        }
                    }
                };
                script.onerror = function() {
                    console.error('โ ูุดู ุชุญููู game.js');
                    createFallbackGame();
                };
                document.head.appendChild(script);
                
            } catch (error) {
                console.error('โ ุฎุทุฃ ูู ุฅูุดุงุก ุงููุนุจุฉ:', error);
                createFallbackGame();
            }
        }
        
        function createFallbackGame() {
            console.log('๐ ุฅูุดุงุก ูุนุจุฉ ุจุฏููุฉ...');
            
            window.game = {
                gameState: 'menu',
                score: 0,
                lives: 3,
                coins: 0,
                timeLeft: 120,
                
                startGame: function() {
                    console.log('๐ ุจุฏุก ูุนุจุฉ ุจุฏููุฉ');
                    this.gameState = 'playing';
                    
                    // ุฅุฎูุงุก ุดุงุดุฉ ุงูุจุฏุงูุฉ
                    document.getElementById('start-screen').style.display = 'none';
                    
                    // ุฅุธูุงุฑ ุดุงุดุฉ ุงููุนุจ
                    document.getElementById('game-screen').style.display = 'flex';
                    
                    // ุฅูุดุงุก canvas ุทุงุฑุฆ ุฅุฐุง ูู ููู ููุฌูุฏุงู
                    let canvas = document.getElementById('game-canvas');
                    if (!canvas) {
                        canvas = document.createElement('canvas');
                        canvas.id = 'game-canvas';
                        document.querySelector('.game-world').appendChild(canvas);
                    }
                    
                    // ุจุฏุก ุญููุฉ ุงููุนุจุฉ ุงูุจุณูุทุฉ
                    startSimpleGameLoop(canvas);
                },
                
                restartGame: function() {
                    this.startGame();
                },
                
                backToMenu: function() {
                    this.gameState = 'menu';
                    document.getElementById('game-screen').style.display = 'none';
                    document.getElementById('start-screen').style.display = 'flex';
                },
                
                updateUI: function() {
                    document.getElementById('score').textContent = this.score;
                    document.getElementById('lives').textContent = this.lives;
                    document.getElementById('coins').textContent = this.coins + '/30';
                    
                    const minutes = Math.floor(this.timeLeft / 60);
                    const seconds = this.timeLeft % 60;
                    document.getElementById('timer').textContent = 
                        minutes.toString().padStart(2, '0') + ':' + seconds.toString().padStart(2, '0');
                }
            };
            
            console.log('โ ุงููุนุจุฉ ุงูุจุฏููุฉ ุฌุงูุฒุฉ');
        }
        
        function startSimpleGameLoop(canvas) {
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            canvas.width = canvas.parentElement.clientWidth;
            canvas.height = canvas.parentElement.clientHeight;
            
            const player = {
                x: 100,
                y: canvas.height - 150,
                width: 40,
                height: 60,
                speed: 5,
                velY: 0,
                jumping: false
            };
            
            const coins = [];
            for (let i = 0; i < 10; i++) {
                coins.push({
                    x: 200 + i * 80,
                    y: canvas.height - 200,
                    collected: false
                });
            }
            
            const keys = {};
            
            // ุงูุชุญูู
            document.addEventListener('keydown', (e) => {
                keys[e.key] = true;
            });
            
            document.addEventListener('keyup', (e) => {
                keys[e.key] = false;
            });
            
            // ุชุญุฏูุซ UI
            function updateUI() {
                document.getElementById('score').textContent = window.game.score;
                document.getElementById('lives').textContent = window.game.lives;
                document.getElementById('coins').textContent = window.game.coins + '/30';
                
                const minutes = Math.floor(window.game.timeLeft / 60);
                const seconds = window.game.timeLeft % 60;
                document.getElementById('timer').textContent = 
                    minutes.toString().padStart(2, '0') + ':' + seconds.toString().padStart(2, '0');
            }
            
            // ูุคูุช ุงูููุช
            const timeInterval = setInterval(() => {
                if (window.game.gameState === 'playing') {
                    window.game.timeLeft--;
                    updateUI();
                    
                    if (window.game.timeLeft <= 0) {
                        clearInterval(timeInterval);
                        endGame(false);
                    }
                }
            }, 1000);
            
            function endGame(win) {
                window.game.gameState = 'ended';
                clearInterval(timeInterval);
                
                if (win) {
                    document.getElementById('end-title').textContent = 'ุชูุงูููุง! ๐';
                    document.getElementById('end-message').textContent = 'ููุฏ ุฑุจุญุช ุงููุนุจุฉ!';
                } else {
                    document.getElementById('end-title').textContent = 'ุงูุชูุช ุงููุนุจุฉ';
                    document.getElementById('end-message').textContent = 'ุญุงูู ูุฑุฉ ุฃุฎุฑู!';
                }
                
                document.getElementById('final-score').textContent = window.game.score;
                document.getElementById('final-coins').textContent = window.game.coins + '/30';
                document.getElementById('final-time').textContent = '02:00';
                document.getElementById('final-kills').textContent = '0';
                
                document.getElementById('game-screen').style.display = 'none';
                document.getElementById('end-screen').style.display = 'flex';
            }
            
            function gameLoop() {
                if (window.game.gameState !== 'playing') return;
                
                // ุชุญุฏูุซ
                player.velY += 0.8;
                
                if (keys['ArrowLeft'] || keys['a']) player.x -= player.speed;
                if (keys['ArrowRight'] || keys['d']) player.x += player.speed;
                
                if ((keys[' '] || keys['ArrowUp'] || keys['w']) && !player.jumping) {
                    player.velY = -15;
                    player.jumping = true;
                }
                
                player.y += player.velY;
                
                // ุงูุฃุฑุถ
                if (player.y > canvas.height - player.height - 50) {
                    player.y = canvas.height - player.height - 50;
                    player.velY = 0;
                    player.jumping = false;
                }
                
                // ุฌูุน ุงูุนููุงุช
                coins.forEach(coin => {
                    if (!coin.collected) {
                        const dx = player.x + player.width/2 - coin.x;
                        const dy = player.y + player.height/2 - coin.y;
                        const distance = Math.sqrt(dx*dx + dy*dy);
                        
                        if (distance < 30) {
                            coin.collected = true;
                            window.game.coins++;
                            window.game.score += 100;
                            updateUI();
                            
                            if (window.game.coins >= 30) {
                                endGame(true);
                            }
                        }
                    }
                });
                
                // ุฑุณู
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // ุงูุณูุงุก
                ctx.fillStyle = '#87CEEB';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // ุงูุฃุฑุถ
                ctx.fillStyle = '#8B4513';
                ctx.fillRect(0, canvas.height - 50, canvas.width, 50);
                
                // ุงูุนููุงุช
                ctx.fillStyle = '#FFD700';
                coins.forEach(coin => {
                    if (!coin.collected) {
                        ctx.beginPath();
                        ctx.arc(coin.x, coin.y, 15, 0, Math.PI * 2);
                        ctx.fill();
                    }
                });
                
                // ุงููุงุนุจ
                ctx.fillStyle = '#E74C3C';
                ctx.fillRect(player.x, player.y, player.width, player.height);
                
                requestAnimationFrame(gameLoop);
            }
            
            updateUI();
            gameLoop();
        }
        
        function toggleFullscreen() {
            const btn = document.getElementById('fullscreen-btn');
            try {
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen();
                    btn.innerHTML = '<i class="fas fa-compress"></i>';
                    showNotification('๐ฅ๏ธ ูุถุน ููุก ุงูุดุงุดุฉ ููุนู');
                } else {
                    document.exitFullscreen();
                    btn.innerHTML = '<i class="fas fa-expand"></i>';
                    showNotification('๐ฑ ุงูุฎุฑูุฌ ูู ููุก ุงูุดุงุดุฉ');
                }
            } catch (error) {
                console.log('โ๏ธ ุฎุทุฃ ูู ููุก ุงูุดุงุดุฉ');
                showNotification('โ๏ธ ูุง ูุฏุนู ุงููุชุตูุญ ููุก ุงูุดุงุดุฉ');
            }
        }
        
        function toggleMusic() {
            const btn = document.getElementById('music-btn');
            if (btn.innerHTML.includes('volume-up')) {
                btn.innerHTML = '<i class="fas fa-volume-mute"></i>';
                btn.title = 'ุชุดุบูู ุงูุตูุช';
                showNotification('๐ ุงูุตูุช ูุชููู');
            } else {
                btn.innerHTML = '<i class="fas fa-volume-up"></i>';
                btn.title = 'ุฅููุงู ุงูุตูุช';
                showNotification('๐ ุงูุตูุช ููุนู');
            }
        }
        
        function showNotification(text) {
            const notification = document.querySelector('.notification');
            const notificationText = document.querySelector('.notification-text');
            
            if (!notification || !notificationText) {
                console.log('๐ข', text);
                return;
            }
            
            notificationText.textContent = text;
            notification.style.display = 'flex';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }
        
        // ุฏุงูุงุช ุงูุทูุงุฑุฆ
        window.forceStartGame = function() {
            console.log('๐ ุจุฏุก ุทุงุฑุฆ');
            if (window.game && window.game.startGame) {
                window.game.startGame();
            } else {
                alert('ุฌุงุฑู ุชููุฆุฉ ุงููุนุจุฉ...');
                setTimeout(function() {
                    if (window.game && window.game.startGame) {
                        window.game.startGame();
                    }
                }, 1000);
            }
        };
        
        window.resetGame = function() {
            console.log('๐ ุฅุนุงุฏุฉ ุชุนููู');
            if (window.game && window.game.restartGame) {
                window.game.restartGame();
            } else {
                location.reload();
            }
        };
        
        window.showDebugInfo = function() {
            console.log('๐ ูุนูููุงุช ุงูุชุตุญูุญ:', {
                game: window.game,
                canvas: document.getElementById('game-canvas')
            });
            alert('ูุนูููุงุช ุงูุชุตุญูุญ ูู ุงููููุณูู (F12)');
        };
        
        // ุญุฏุซ ููุก ุงูุดุงุดุฉ
        document.addEventListener('fullscreenchange', () => {
            const btn = document.getElementById('fullscreen-btn');
            if (btn) {
                if (document.fullscreenElement) {
                    btn.innerHTML = '<i class="fas fa-compress"></i>';
                } else {
                    btn.innerHTML = '<i class="fas fa-expand"></i>';
                }
            }
        });
    </script>
</body>
</html>
