<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>๐ฎ ูุนุจุฉ ูุงุฑูู ุงูุฎุงุฑูุฉ</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #0a0a1a;
            font-family: 'Cairo', sans-serif;
        }
        
        /* ุชุญุณููุงุช ููุฌูุงู */
        @media (max-width: 768px) {
            .mobile-only { display: block !important; }
            .desktop-only { display: none !important; }
        }
        
        @media (min-width: 769px) {
            .mobile-only { display: none !important; }
            .desktop-only { display: block !important; }
        }
    </style>
</head>
<body>
    <!-- ุดุงุดุฉ ุงูุชุญููู -->
    <div id="loading-screen">
        <div class="loading-content">
            <div class="spinner"></div>
            <h2>๐ ุฌุงุฑู ุชุญููู ุงููุบุงูุฑุฉ...</h2>
            <p>ูุฑุฌู ุงูุงูุชุธุงุฑ ููููุงู</p>
        </div>
    </div>

    <!-- ุดุงุดุฉ ุงูุจุฏุงูุฉ -->
    <div id="start-screen" class="screen active">
        <div class="container">
            <div class="header">
                <h1><i class="fas fa-gamepad"></i> ูุนุจุฉ ูุงุฑูู ุงูุฎุงุฑูุฉ</h1>
                <p class="subtitle">ูุบุงูุฑุฉ ูููุฆุฉ ุจุงูุชุญุฏูุงุช ูุงูุฅุซุงุฑุฉ!</p>
            </div>

            <div class="hero-section">
                <div class="character-preview">
                    <div class="avatar" id="player-avatar">
                        <img src="player.png" alt="ุดุฎุตูุฉ ุงููุงุนุจ" id="player-img" 
                             onerror="this.style.display='none'; document.getElementById('avatar-fallback').style.display='flex'">
                        <div id="avatar-fallback" class="avatar-fallback">
                            <i class="fas fa-user-ninja"></i>
                        </div>
                    </div>
                    <div class="character-info">
                        <h3><i class="fas fa-user"></i> ุงูุจุทู ุงูุฎุงุฑู</h3>
                        <div class="stats">
                            <div class="stat"><i class="fas fa-bolt"></i> ุณุฑุนุฉ ุนุงููุฉ</div>
                            <div class="stat"><i class="fas fa-shield-alt"></i> ุฏูุงุน ููู</div>
                            <div class="stat"><i class="fas fa-fist-raised"></i> ููุฉ ุฎุงุฑูุฉ</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="stats-section">
                <h2><i class="fas fa-chart-bar"></i> ุงูุฅุญุตุงุฆูุงุช</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <i class="fas fa-crown"></i>
                        <h3>ุฃูุถู ูุชูุฌุฉ</h3>
                        <p id="best-score">0</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-clock"></i>
                        <h3>ุงูููุช</h3>
                        <p>02:00</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-heart"></i>
                        <h3>ุงูุฃุฑูุงุญ</h3>
                        <p>3</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-coins"></i>
                        <h3>ุงูุนููุงุช</h3>
                        <p>30</p>
                    </div>
                </div>
            </div>

            <div class="controls-info">
                <h2><i class="fas fa-gamepad"></i> ุทุฑููุฉ ุงููุนุจ</h2>
                <div class="controls">
                    <div class="control-group">
                        <div class="keys">
                            <kbd>โ</kbd><kbd>โ</kbd>
                        </div>
                        <span>ุงูุญุฑูุฉ ูููู/ูุณุงุฑ</span>
                    </div>
                    <div class="control-group">
                        <div class="keys">
                            <kbd>Space</kbd>
                        </div>
                        <span>ุงูููุฒ</span>
                    </div>
                    <div class="control-group">
                        <div class="keys">
                            <kbd>P</kbd>
                        </div>
                        <span>ุฅููุงู/ูุชุงุจุนุฉ</span>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <button id="start-btn" class="btn primary-btn">
                    <i class="fas fa-play"></i>
                    <span>๐ฎ ุงุจุฏุฃ ุงููุนุจ</span>
                </button>
                <button id="how-to-play-btn" class="btn secondary-btn">
                    <i class="fas fa-question-circle"></i>
                    <span>๐ ููู ุชูุนุจ</span>
                </button>
            </div>

            <div class="tips">
                <div class="tip">
                    <i class="fas fa-lightbulb"></i>
                    <p><strong>๐ก ูุตูุญุฉ:</strong> ุงููุฒ ููู ุงูุฃุนุฏุงุก ููุฒููุชูู ูุงุญุตู ุนูู ููุงุท ุฅุถุงููุฉ!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ุดุงุดุฉ ุงููุนุจ -->
    <div id="game-screen" class="screen">
        <!-- ุดุฑูุท ุงููุนูููุงุช ุงูุนููู -->
        <div class="game-header">
            <div class="info-panel">
                <div class="info-item">
                    <i class="fas fa-heart"></i>
                    <span id="lives-display">3</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-star"></i>
                    <span id="score-display">0</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-coins"></i>
                    <span id="coins-display">0/30</span>
                </div>
                <div class="info-item timer">
                    <i class="fas fa-clock"></i>
                    <span id="timer-display">02:00</span>
                </div>
            </div>
            
            <div class="action-panel">
                <button id="pause-btn" class="icon-btn">
                    <i class="fas fa-pause"></i>
                </button>
                <button id="fullscreen-btn" class="icon-btn">
                    <i class="fas fa-expand"></i>
                </button>
                <button id="sound-btn" class="icon-btn">
                    <i class="fas fa-volume-up"></i>
                </button>
            </div>
        </div>

        <!-- ููุทูุฉ ุงููุนุจุฉ -->
        <div class="game-area">
            <canvas id="game-canvas"></canvas>
            
            <!-- ุฃุฒุฑุงุฑ ุงูุชุญูู ููุฌูุงู -->
            <div class="mobile-controls">
                <div class="control-row">
                    <button id="btn-left" class="control-btn direction-btn">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <button id="btn-right" class="control-btn direction-btn">
                        <i class="fas fa-arrow-right"></i>
                    </button>
                    <button id="btn-jump" class="control-btn jump-btn">
                        <i class="fas fa-arrow-up"></i>
                        <span>ููุฒ</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- ุฑุณุงูุฉ ุงููููุฉ -->
        <div class="mission-alert">
            <span id="mission-text">๐ฏ ุงุฌูุน 30 ุนููุฉ ุฐูุจูุฉ!</span>
        </div>
    </div>

    <!-- ุดุงุดุฉ ุงูููุงูุฉ -->
    <div id="end-screen" class="screen">
        <div class="end-container">
            <div class="result-icon" id="result-icon">
                <i class="fas fa-trophy"></i>
            </div>
            
            <h1 id="end-title">๐ ุชูุงูููุง!</h1>
            <p id="end-message">ููุฏ ุฃูููุช ุงููุบุงูุฑุฉ ุจูุฌุงุญ</p>
            
            <div class="final-stats">
                <div class="final-stat">
                    <h3>ุงููุชูุฌุฉ ุงูููุงุฆูุฉ</h3>
                    <p id="final-score">0</p>
                </div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <i class="fas fa-coins"></i>
                        <span>ุงูุนููุงุช</span>
                        <p id="final-coins">0/30</p>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-clock"></i>
                        <span>ุงูููุช ุงููุชุจูู</span>
                        <p id="final-time">00:00</p>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-skull"></i>
                        <span>ุงูุฃุนุฏุงุก</span>
                        <p id="final-enemies">0</p>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-bolt"></i>
                        <span>ุงูููุงุกุฉ</span>
                        <p id="final-efficiency">0%</p>
                    </div>
                </div>
            </div>
            
            <div class="end-buttons">
                <button id="play-again-btn" class="btn primary-btn">
                    <i class="fas fa-redo"></i>
                    <span>๐ ูุนุจ ูุฑุฉ ุฃุฎุฑู</span>
                </button>
                <button id="back-to-menu-btn" class="btn secondary-btn">
                    <i class="fas fa-home"></i>
                    <span>๐ ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</span>
                </button>
            </div>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ุงูุชุนูููุงุช -->
    <div id="instructions-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-graduation-cap"></i> ุฏููู ุงููุนุจ</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="instruction">
                    <h3>๐ฏ ุงููุฏู</h3>
                    <p>ุงุฌูุน 30 ุนููุฉ ุฐูุจูุฉ ูุชุฌูุจ ุงูุฃุนุฏุงุก ูููุตูู ุฅูู ุงููุตุฑ ุงููููู!</p>
                </div>
                <div class="instruction">
                    <h3>๐ฎ ุงูุชุญูู</h3>
                    <p>ุงุณุชุฎุฏู ุฃุฒุฑุงุฑ ุงูุฃุณูู ููุญุฑูุฉ ูููุชุงุญ ุงููุณุงูุฉ ููููุฒ</p>
                </div>
                <div class="instruction">
                    <h3>โ๏ธ ุงููุชุงู</h3>
                    <p>ุงููุฒ ููู ุฑุคูุณ ุงูุฃุนุฏุงุก ููุฒููุชูู ูุงุญุตู ุนูู 200 ููุทุฉ ููู ุนุฏู</p>
                </div>
                <div class="instruction">
                    <h3>๐ฐ ุงูุนููุงุช</h3>
                    <p>ูู ุนููุฉ ุชุนุทูู 100 ููุทุฉ. ุงุฌูุนูุง ุฌููุนุงู ูููุงูุฃุฉ ุฎุงุตุฉ!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ุฅุดุนุงุฑุงุช -->
    <div id="notification" class="notification">
        <i class="fas fa-info-circle"></i>
        <span id="notification-text">ูุฑุญุจุงู ุจู ูู ุงููุนุจุฉ!</span>
    </div>

    <!-- ุงูุฃุตูุงุช -->
    <audio id="jump-sound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-player-jumping-in-a-video-game-2043.mp3" type="audio/mpeg">
    </audio>
    <audio id="coin-sound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3" type="audio/mpeg">
    </audio>
    <audio id="hit-sound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-retro-game-emergency-alarm-1000.mp3" type="audio/mpeg">
    </audio>

    <!-- ุงููููุงุช ุงูุฑุฆูุณูุฉ -->
    <script src="game.js"></script>
    <script>
        // ุชููุฆุฉ ุณุฑูุนุฉ
        document.addEventListener('DOMContentLoaded', function() {
            console.log('๐ฎ ุงููุนุจุฉ ุฌุงูุฒุฉ ููุชุญููู...');
            
            // ุฅุฎูุงุก ุดุงุดุฉ ุงูุชุญููู ุจุนุฏ 2 ุซุงููุฉ
            setTimeout(function() {
                document.getElementById('loading-screen').style.display = 'none';
                console.log('โ ุงููุนุจุฉ ูุญููุฉ ุจูุฌุงุญ!');
                
                // ุชุญููู ุฃูุถู ูุชูุฌุฉ
                loadBestScore();
                
                // ุฅุนุฏุงุฏ ุงูุฃุฒุฑุงุฑ ุงูุฃุณุงุณูุฉ
                setupButtons();
                
            }, 2000);
        });
        
        function loadBestScore() {
            try {
                const saved = localStorage.getItem('mario_best_score');
                if (saved) {
                    document.getElementById('best-score').textContent = saved;
                }
            } catch(e) {
                console.log('โ๏ธ ูุง ูููู ุชุญููู ุฃูุถู ูุชูุฌุฉ');
            }
        }
        
        function setupButtons() {
            // ุฒุฑ ุงูุจุฏุก
            document.getElementById('start-btn').addEventListener('click', function() {
                if (typeof startGame === 'function') {
                    startGame();
                }
            });
            
            // ุฒุฑ ุงูุชุนูููุงุช
            document.getElementById('how-to-play-btn').addEventListener('click', function() {
                document.getElementById('instructions-modal').style.display = 'flex';
            });
            
            // ุฒุฑ ุฅุบูุงู ุงูุชุนูููุงุช
            document.querySelector('#instructions-modal .close-btn').addEventListener('click', function() {
                document.getElementById('instructions-modal').style.display = 'none';
            });
            
            // ุฒุฑ ุฅุนุงุฏุฉ ุงููุนุจ
            document.getElementById('play-again-btn').addEventListener('click', function() {
                if (typeof restartGame === 'function') {
                    restartGame();
                }
            });
            
            // ุฒุฑ ุงูุนูุฏุฉ ูููุงุฆูุฉ
            document.getElementById('back-to-menu-btn').addEventListener('click', function() {
                showScreen('start');
            });
            
            // ุฒุฑ ุงูุฅููุงู
            document.getElementById('pause-btn').addEventListener('click', function() {
                if (typeof togglePause === 'function') {
                    togglePause();
                }
            });
            
            // ุฒุฑ ุงูุตูุช
            document.getElementById('sound-btn').addEventListener('click', function() {
                if (typeof toggleSound === 'function') {
                    toggleSound();
                }
            });
            
            // ุฒุฑ ููุก ุงูุดุงุดุฉ
            document.getElementById('fullscreen-btn').addEventListener('click', function() {
                toggleFullscreen();
            });
        }
        
        function showScreen(screenId) {
            // ุฅุฎูุงุก ูู ุงูุดุงุดุงุช
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
                screen.style.display = 'none';
            });
            
            // ุฅุธูุงุฑ ุงูุดุงุดุฉ ุงููุทููุจุฉ
            const screen = document.getElementById(screenId + '-screen');
            if (screen) {
                screen.classList.add('active');
                screen.style.display = 'flex';
            }
        }
        
        function toggleFullscreen() {
            try {
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen().catch(err => {
                        console.log(`ุฎุทุฃ ูู ููุก ุงูุดุงุดุฉ: ${err.message}`);
                    });
                } else {
                    document.exitFullscreen();
                }
            } catch (error) {
                console.log('โ๏ธ ุงููุชุตูุญ ูุง ูุฏุนู ููุก ุงูุดุงุดุฉ');
            }
        }
        
        function showNotification(message) {
            const notification = document.getElementById('notification');
            const text = document.getElementById('notification-text');
            
            if (notification && text) {
                text.textContent = message;
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
        }
        
        // ุฌุนู ุงูุฏูุงู ูุชุงุญุฉ ุนุงูููุงู
        window.showScreen = showScreen;
        window.showNotification = showNotification;
        window.toggleFullscreen = toggleFullscreen;
        
        // ููุน ุณููู ุงููุชุตูุญ ุงูุงูุชุฑุงุถู
        window.addEventListener('keydown', function(e) {
            if(['Space','ArrowUp','ArrowDown','ArrowLeft','ArrowRight'].indexOf(e.code) > -1) {
                e.preventDefault();
            }
        });
        
        // ููุน ุงูุชูุจูุฑ ุจุงูููุณ ุนูู ุงูุฌูุงู
        document.addEventListener('touchstart', function(e) {
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        }, { passive: false });
        
        // ููุน ุงููุงุฆูุฉ ุงูุณูุงููุฉ
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });
        
        console.log('๐ฎ ุงููุธุงู ุงูุฃุณุงุณู ุฌุงูุฒ!');
    </script>
</body>
</html>
