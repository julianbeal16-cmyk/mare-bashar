<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>๐ฎ ูุนุจุฉ ูุงุฑูู ุงูุฎุงุฑูุฉ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>๐ฎ</text></svg>">
    <style>
        /* ุฅุตูุงุญุงุช ุณุฑูุนุฉ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        html, body {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background: #0a0a1a;
            font-family: 'Cairo', sans-serif;
            position: fixed;
            top: 0;
            left: 0;
        }
        
        /* ุฑุณุงูุฉ ูููุถุน ุงูุนููุฏู */
        #orientation-message {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a0a1a;
            color: white;
            justify-content: center;
            align-items: center;
            z-index: 99999;
            text-align: center;
            padding: 20px;
            font-size: 1.2rem;
        }
        
        #orientation-message i {
            font-size: 3rem;
            margin-bottom: 20px;
            display: block;
            color: #FFD700;
        }
        
        @media (orientation: portrait) and (max-width: 768px) {
            #orientation-message {
                display: flex;
            }
            
            body > *:not(#orientation-message) {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <!-- ุฑุณุงูุฉ ุชุฏููุฑ ุงููุงุชู -->
    <div id="orientation-message">
        <div>
            <i class="fas fa-rotate"></i>
            <h2>๐ ุงูุฑุฌุงุก ุชุฏููุฑ ุงููุงุชู ุฅูู ุงููุถุน ุงูุฃููู</h2>
            <p>ูุนุจ ุฃูุถู ุชุฌุฑุจุฉุ ูุฑุฌู ุชุฏููุฑ ูุงุชูู ุฅูู ุงูุฌุงูุจ</p>
        </div>
    </div>

    <!-- ุดุงุดุฉ ุงูุชุญููู -->
    <div id="loading-screen">
        <div class="loading-content">
            <div class="spinner"></div>
            <h2>๐ ุฌุงุฑู ุชุญููู ุงููุนุจุฉ...</h2>
            <p id="loading-progress">0%</p>
        </div>
    </div>

    <!-- ุดุงุดุฉ ุงูุจุฏุงูุฉ -->
    <div id="start-screen" class="screen">
        <div class="container">
            <div class="header">
                <h1><i class="fas fa-gamepad"></i> ูุนุจุฉ ูุงุฑูู ุงูุฎุงุฑูุฉ</h1>
                <p class="subtitle">ูุบุงูุฑุฉ ูููุฆุฉ ุจุงูุชุญุฏูุงุช ูุงูุฅุซุงุฑุฉ!</p>
            </div>

            <div class="hero-section">
                <div class="character-preview">
                    <div class="avatar">
                        <div class="avatar-icon">
                            <i class="fas fa-user-ninja"></i>
                        </div>
                    </div>
                    <div class="character-info">
                        <h3><i class="fas fa-user"></i> ุงูุจุทู ุงูุฎุงุฑู</h3>
                        <div class="stats">
                            <div class="stat"><i class="fas fa-bolt"></i> <span>ุณุฑุนุฉ ุนุงููุฉ</span></div>
                            <div class="stat"><i class="fas fa-shield-alt"></i> <span>ุฏูุงุน ููู</span></div>
                            <div class="stat"><i class="fas fa-fist-raised"></i> <span>ููุฉ ุฎุงุฑูุฉ</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="stats-section">
                <h2><i class="fas fa-chart-bar"></i> ุงูุฅุญุตุงุฆูุงุช</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <i class="fas fa-crown"></i>
                        <h3>ุฃูุถู ูุชูุฌุฉ</h3>
                        <p id="best-score">0</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-clock"></i>
                        <h3>ุงูููุช</h3>
                        <p>02:00</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-heart"></i>
                        <h3>ุงูุฃุฑูุงุญ</h3>
                        <p>3</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-coins"></i>
                        <h3>ุงูุนููุงุช</h3>
                        <p>15</p>
                    </div>
                </div>
            </div>

            <div class="controls-info">
                <h2><i class="fas fa-gamepad"></i> ุทุฑููุฉ ุงููุนุจ</h2>
                <div class="controls">
                    <div class="control-group">
                        <div class="keys">
                            <kbd>โ</kbd><kbd>โ</kbd>
                        </div>
                        <span>ุงูุญุฑูุฉ ูููู/ูุณุงุฑ</span>
                    </div>
                    <div class="control-group">
                        <div class="keys">
                            <kbd>Space</kbd>
                        </div>
                        <span>ุงูููุฒ</span>
                    </div>
                    <div class="control-group">
                        <div class="keys">
                            <kbd>P</kbd>
                        </div>
                        <span>ุฅููุงู/ูุชุงุจุนุฉ</span>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <button id="start-btn" class="btn primary-btn">
                    <i class="fas fa-play"></i>
                    <span>๐ฎ ุงุจุฏุฃ ุงููุนุจ</span>
                </button>
                <button id="how-to-play-btn" class="btn secondary-btn">
                    <i class="fas fa-question-circle"></i>
                    <span>๐ ููู ุชูุนุจ</span>
                </button>
            </div>

            <div class="tips">
                <div class="tip">
                    <i class="fas fa-lightbulb"></i>
                    <p><strong>๐ก ูุตูุญุฉ:</strong> ุงููุฒ ููู ุงูุฃุนุฏุงุก ููุฒููุชูู ูุงุญุตู ุนูู 200 ููุทุฉ ุฅุถุงููุฉ!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ุดุงุดุฉ ุงููุนุจ -->
    <div id="game-screen" class="screen">
        <!-- ุดุฑูุท ุงููุนูููุงุช ุงูุนููู -->
        <div class="game-header">
            <div class="info-panel">
                <div class="info-item">
                    <i class="fas fa-heart"></i>
                    <span id="lives-display">3</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-star"></i>
                    <span id="score-display">0</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-coins"></i>
                    <span id="coins-display">0/15</span>
                </div>
                <div class="info-item timer">
                    <i class="fas fa-clock"></i>
                    <span id="timer-display">02:00</span>
                </div>
            </div>
            
            <div class="action-panel">
                <button id="pause-btn" class="icon-btn" title="ุฅููุงู/ูุชุงุจุนุฉ">
                    <i class="fas fa-pause"></i>
                </button>
                <button id="sound-btn" class="icon-btn" title="ุชุดุบูู/ุฅููุงู ุงูุตูุช">
                    <i class="fas fa-volume-up"></i>
                </button>
                <button id="fullscreen-btn" class="icon-btn" title="ููุก ุงูุดุงุดุฉ">
                    <i class="fas fa-expand"></i>
                </button>
            </div>
        </div>

        <!-- ููุทูุฉ ุงููุนุจุฉ -->
        <div class="game-area">
            <canvas id="game-canvas"></canvas>
            
            <!-- ุฃุฒุฑุงุฑ ุงูุชุญูู ููุฌูุงู -->
            <div class="mobile-controls">
                <div class="control-row">
                    <button id="btn-left" class="control-btn direction-btn">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <button id="btn-right" class="control-btn direction-btn">
                        <i class="fas fa-arrow-right"></i>
                    </button>
                    <button id="btn-jump" class="control-btn jump-btn">
                        <i class="fas fa-arrow-up"></i>
                        <span>ููุฒ</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- ุฑุณุงูุฉ ุงููููุฉ -->
        <div class="mission-alert">
            <span id="mission-text">๐ฏ ุงุฌูุน 15 ุนููุฉ ุฐูุจูุฉ!</span>
        </div>
    </div>

    <!-- ุดุงุดุฉ ุงูููุงูุฉ -->
    <div id="end-screen" class="screen">
        <div class="end-container">
            <div class="result-icon" id="result-icon">
                <i class="fas fa-trophy"></i>
            </div>
            
            <h1 id="end-title">๐ ุชูุงูููุง!</h1>
            <p id="end-message">ููุฏ ุฃูููุช ุงููุบุงูุฑุฉ ุจูุฌุงุญ</p>
            
            <div class="final-stats">
                <div class="final-stat">
                    <h3>ุงููุชูุฌุฉ ุงูููุงุฆูุฉ</h3>
                    <p id="final-score">0</p>
                </div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <i class="fas fa-coins"></i>
                        <span>ุงูุนููุงุช</span>
                        <p id="final-coins">0/15</p>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-clock"></i>
                        <span>ุงูููุช ุงููุชุจูู</span>
                        <p id="final-time">00:00</p>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-skull"></i>
                        <span>ุงูุฃุนุฏุงุก</span>
                        <p id="final-enemies">0</p>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-bolt"></i>
                        <span>ุงูููุงุกุฉ</span>
                        <p id="final-efficiency">0%</p>
                    </div>
                </div>
            </div>
            
            <div class="end-buttons">
                <button id="play-again-btn" class="btn primary-btn">
                    <i class="fas fa-redo"></i>
                    <span>๐ ูุนุจ ูุฑุฉ ุฃุฎุฑู</span>
                </button>
                <button id="back-to-menu-btn" class="btn secondary-btn">
                    <i class="fas fa-home"></i>
                    <span>๐ ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</span>
                </button>
            </div>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ุงูุชุนูููุงุช -->
    <div id="instructions-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-graduation-cap"></i> ุฏููู ุงููุนุจ</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="instruction">
                    <h3>๐ฏ ุงููุฏู</h3>
                    <p>ุงุฌูุน 15 ุนููุฉ ุฐูุจูุฉ ูุชุฌูุจ ุงูุฃุนุฏุงุก ููููุฒ!</p>
                </div>
                <div class="instruction">
                    <h3>๐ฎ ุงูุชุญูู</h3>
                    <p>ุงุณุชุฎุฏู ุฃุฒุฑุงุฑ ุงูุฃุณูู ููุญุฑูุฉ ูููุชุงุญ ุงููุณุงูุฉ ููููุฒ</p>
                </div>
                <div class="instruction">
                    <h3>โ๏ธ ุงููุชุงู</h3>
                    <p>ุงููุฒ ููู ุฑุคูุณ ุงูุฃุนุฏุงุก ููุฒููุชูู</p>
                </div>
                <div class="instruction">
                    <h3>๐ฐ ุงูุนููุงุช</h3>
                    <p>ูู ุนููุฉ ุชุนุทูู 100 ููุทุฉ</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ุฅุดุนุงุฑุงุช -->
    <div id="notification" class="notification">
        <div class="notification-content">
            <i class="fas fa-info-circle"></i>
            <span id="notification-text">ูุฑุญุจุงู ุจู ูู ุงููุนุจุฉ!</span>
        </div>
    </div>

    <!-- ุงูุฃุตูุงุช ุงููุฏูุฌุฉ -->
    <audio id="jump-sound" preload="auto" volume="0.3">
        <source src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==" type="audio/wav">
    </audio>
    
    <audio id="coin-sound" preload="auto" volume="0.3">
        <source src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==" type="audio/wav">
    </audio>
    
    <audio id="hit-sound" preload="auto" volume="0.3">
        <source src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==" type="audio/wav">
    </audio>

    <!-- ุงููููุงุช ุงูุจุฑูุฌูุฉ -->
    <script src="game.js"></script>
    <script>
        // ุชููุฆุฉ ุณุฑูุนุฉ
        document.addEventListener('DOMContentLoaded', function() {
            console.log('๐ฎ ุจุฏุก ุชุญููู ุงููุนุจุฉ...');
            
            // ุชููุฆุฉ ุงููุนุจุฉ ูุจุงุดุฑุฉ
            setTimeout(initGame, 100);
            
            // ุฅุฎูุงุก ุดุงุดุฉ ุงูุชุญููู ุจุนุฏ ููุช ูุตูุฑ
            setTimeout(function() {
                document.getElementById('loading-screen').style.display = 'none';
                document.getElementById('start-screen').classList.add('active');
                document.getElementById('start-screen').style.display = 'flex';
                showNotification('๐ฎ ุงููุนุจุฉ ุฌุงูุฒุฉ! ุงุถุบุท ุงุจุฏุฃ');
            }, 1500);
        });
        
        function initGame() {
            // ุชุนููู ุงูุฃุญุฏุงุซ ุงูุฃุณุงุณูุฉ
            setupBasicEvents();
            
            // ุชุญููู ุฃูุถู ูุชูุฌุฉ
            loadBestScore();
            
            // ุฌุนู ุงูุฏูุงู ูุชุงุญุฉ
            window.startGame = startGameFunction;
            window.restartGame = restartGameFunction;
            window.showScreen = showScreenFunction;
            window.showNotification = showNotificationFunction;
            window.toggleFullscreen = toggleFullscreenFunction;
            
            console.log('โ ุงูุชููุฆุฉ ุงูุฃุณุงุณูุฉ ููุชููุฉ');
        }
        
        function setupBasicEvents() {
            // ุฒุฑ ุงูุจุฏุก
            document.getElementById('start-btn').addEventListener('click', function() {
                console.log('๐ ุจุฏุก ุงููุนุจุฉ...');
                startGameFunction();
            });
            
            // ุฒุฑ ุงูุชุนูููุงุช
            document.getElementById('how-to-play-btn').addEventListener('click', function() {
                document.getElementById('instructions-modal').style.display = 'flex';
            });
            
            // ุฒุฑ ุงูุฅุบูุงู
            document.querySelector('.close-btn').addEventListener('click', function() {
                document.getElementById('instructions-modal').style.display = 'none';
            });
            
            // ุฒุฑ ุฅุนุงุฏุฉ ุงููุนุจ
            document.getElementById('play-again-btn').addEventListener('click', function() {
                restartGameFunction();
            });
            
            // ุฒุฑ ุงูุนูุฏุฉ ูููุงุฆูุฉ
            document.getElementById('back-to-menu-btn').addEventListener('click', function() {
                showScreenFunction('start');
            });
            
            // ุฅุบูุงู ุงููุงูุฐุฉ ุนูุฏ ุงูููุฑ ุฎุงุฑุฌูุง
            window.addEventListener('click', function(e) {
                if (e.target.id === 'instructions-modal') {
                    document.getElementById('instructions-modal').style.display = 'none';
                }
            });
        }
        
        function startGameFunction() {
            console.log('๐ฎ ุจุฏุก ุงููุนุจุฉ ุงููุนููุฉ...');
            
            // ุงูุงูุชูุงู ูุดุงุดุฉ ุงููุนุจ
            showScreenFunction('game');
            
            // ุจุฏุก ุงููุนุจุฉ ุจุนุฏ ุชุฃุฎูุฑ ูุตูุฑ
            setTimeout(function() {
                if (typeof MarioGame !== 'undefined' && MarioGame.startGame) {
                    MarioGame.startGame();
                } else {
                    console.error('โ MarioGame ุบูุฑ ูุนุฑูู');
                    showNotification('โ๏ธ ุฌุงุฑู ุชุญููู ุงููุนุจุฉ...');
                    // ุฅุนุงุฏุฉ ุงููุญุงููุฉ
                    setTimeout(startGameFunction, 500);
                }
            }, 300);
        }
        
        function restartGameFunction() {
            showScreenFunction('start');
            setTimeout(startGameFunction, 500);
        }
        
        function showScreenFunction(screenId) {
            // ุฅุฎูุงุก ูู ุงูุดุงุดุงุช
            var screens = document.querySelectorAll('.screen');
            screens.forEach(function(screen) {
                screen.classList.remove('active');
                screen.style.display = 'none';
            });
            
            // ุฅุธูุงุฑ ุงูุดุงุดุฉ ุงููุทููุจุฉ
            var screen = document.getElementById(screenId + '-screen');
            if (screen) {
                screen.classList.add('active');
                screen.style.display = 'flex';
                
                // ุฅุฐุง ูุงูุช ุดุงุดุฉ ุงููุนุจุ ุชุฃูุฏ ูู ุฃู Canvas ุจุญุฌู ุตุญูุญ
                if (screenId === 'game') {
                    setTimeout(resizeCanvas, 100);
                }
            }
        }
        
        function showNotificationFunction(message) {
            var notification = document.getElementById('notification');
            var text = document.getElementById('notification-text');
            
            if (notification && text) {
                text.textContent = message;
                notification.classList.add('show');
                
                setTimeout(function() {
                    notification.classList.remove('show');
                }, 3000);
            }
        }
        
        function toggleFullscreenFunction() {
            try {
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen();
                } else {
                    document.exitFullscreen();
                }
            } catch (error) {
                console.log('โ๏ธ ุฎุทุฃ ูู ููุก ุงูุดุงุดุฉ:', error);
            }
        }
        
        function loadBestScore() {
            try {
                var saved = localStorage.getItem('mario_best_score');
                if (saved) {
                    document.getElementById('best-score').textContent = saved;
                }
            } catch(e) {
                console.log('โ๏ธ ูุง ูููู ุชุญููู ุฃูุถู ูุชูุฌุฉ');
            }
        }
        
        function resizeCanvas() {
            var canvas = document.getElementById('game-canvas');
            if (canvas) {
                var gameArea = document.querySelector('.game-area');
                if (gameArea) {
                    canvas.width = gameArea.clientWidth;
                    canvas.height = gameArea.clientHeight;
                    console.log('๐ Canvas ุฌุฏูุฏ:', canvas.width, 'x', canvas.height);
                }
            }
        }
        
        // ุฅุนุงุฏุฉ ุถุจุท Canvas ุนูุฏ ุชุบููุฑ ุญุฌู ุงููุงูุฐุฉ
        window.addEventListener('resize', resizeCanvas);
        window.addEventListener('orientationchange', function() {
            setTimeout(resizeCanvas, 300);
        });
        
        // ููุน ุงูุณููู ุงูุงูุชุฑุงุถู
        document.addEventListener('keydown', function(e) {
            if(['Space','ArrowUp','ArrowDown','ArrowLeft','ArrowRight'].indexOf(e.code) > -1) {
                e.preventDefault();
            }
        });
        
        // ููุน ุงููุงุฆูุฉ ุงูุณูุงููุฉ
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });
        
        console.log('๐ฎ ุงููุธุงู ุงูุฃุณุงุณู ุฌุงูุฒ!');
    </script>
</body>
</html>
